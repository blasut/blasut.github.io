<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Blasut - A simple migrations function for use with caveman.</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Blasut</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>A simple migrations function for use with caveman.</h1>

            <div class="info">
    Posted on September  5, 2015
    
        by blasut
    
</div>

<p>Super simple function I’ve been using in a caveman project. You have to create the “migrations” folder first.</p>
<pre><code>(defun new-migration (name)
  &quot;Creates a new migration sql file.&quot;
  (let* ((fixed-name (cl-ppcre:regex-replace-all &quot;\\s&quot; (string-downcase name) &quot;-&quot;))
         (timestamp (write-to-string (local-time:timestamp-to-unix (local-time:now))))
         (file-name (concatenate 'string &quot;migrations/&quot; timestamp &quot;-&quot; fixed-name &quot;.sql&quot;)))
    (with-open-file  (file file-name
                           :direction :output
                           :if-does-not-exist :create)
      (format file &quot;Write your sql here&quot;))))</code></pre>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
